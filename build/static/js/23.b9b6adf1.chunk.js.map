{"version":3,"sources":["app/components/transaction/Withdrawl.js"],"names":["$","require","Datatable","Withdrawl","baseUrl","process","user","setUser","useState","mount","setMount","profle","access_token","localStorage","getItem","headers","Authorization","concat","axios","get","then","res","data","dataTable","console","log","useEffect","undefined","_jsx","className","style","children","src","width","height","_jsxs","map","item","index","_id","Phone","Link","to","Name","amount","type","status","_Fragment","onClick","async","userID","txnID","reqID","pathUrl","post","subCode","Swal","fire","title","message","icon","confirmButtonText","setTimeout","catch","e","update","txn_id","patch","id","error","reject"],"mappings":"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","file":"static/js/23.b9b6adf1.chunk.js","sourcesContent":["import axios from \"axios\";\nimport React, { useEffect, useState } from \"react\";\nimport { Card } from \"react-bootstrap\";\nimport { Link } from \"react-router-dom\";\nimport Swal from \"sweetalert2\";\n\nconst $ = require(\"jquery\")\n$.Datatable = require(\"datatables.net\");\n\nconst Withdrawl = () => {\n\n  const beckendLocalApiUrl = process.env.REACT_APP_BACKEND_LOCAL_API;\n  const beckendLiveApiUrl = process.env.REACT_APP_BACKEND_LIVE_API;\n  const nodeMode = process.env.NODE_ENV;\n  if (nodeMode === \"development\") {\n    var baseUrl = beckendLocalApiUrl;\n  } else {\n    baseUrl = beckendLiveApiUrl;\n  }\n\n\n  const [user, setUser] = useState()\n  const [mount, setMount] = useState(false);\n\n  const profle = () => {\n\n    const access_token = localStorage.getItem(\"token\")\n    const headers = {\n      Authorization: `Bearer ${access_token}`\n    }\n    axios.get(baseUrl+`temp/withdraw/all/pending`, { headers })\n      .then((res) => {\n        setUser(res.data)\n        $('table').dataTable();\n\n        console.log(user)\n      })\n  }\n\n  // const checkStatus = async (id) => {\n  //   setMount(true)\n  //   const access_token = localStorage.getItem(\"token\")\n  //   const headers = {\n  //     Authorization: `Bearer ${access_token}`\n  //   }\n  //   axios.get(baseUrl+`withdrawlstatus/${id}`,\n  //     { headers })\n  //     .then((res) => {\n  //       setMount(false)\n  //       console.log(res.data)\n  //       Swal.fire({\n  //         title: res.data.message,\n  //         icon: \"info\",\n  //         confirmButtonText: \"OK\",\n  //       });\n  //       profle()\n  //     }).catch((e) => {\n  //       setMount(false)\n  //       profle()\n  //       console.log(e);\n  //     })\n  // }\n\n\n\n  const update = async (amount, type, userID, txnID, reqID) => {\n    setMount(true)\n    const access_token = localStorage.getItem(\"token\")\n    const headers = {\n      Authorization: `Bearer ${access_token}`\n    }\n    //bank\n    if(type=='upi'){\n      var pathUrl = baseUrl+`withdraw/razorpay/adminmanual`;\n    }else{\n      var pathUrl = baseUrl+`withdraw/decentro/adminmanual`;\n    }\n    axios.post(pathUrl,\n      {\n        amount: amount, type: type, userID: userID, txnID: txnID, reqID: reqID\n      },\n      { headers })\n      .then((res) => {\n        setMount(false);\n        if (res.data.subCode === '200') {\n          console.log('cash res', res);\n          Swal.fire({\n            title: res.data.message,\n            icon: \"success\",\n            confirmButtonText: \"OK\",\n          });\n          setTimeout(() => {\n            profle()\n          }, 1000);\n        }\n        else {\n          Swal.fire({\n            title: res.data.message,\n            icon: \"danger\",\n            confirmButtonText: \"OK\",\n          });\n           setTimeout(() => {\n            profle()\n          }, 1000);\n        }\n      }).catch((e) => {\n        setMount(false)\n        Swal.fire({\n          title: 'Error! try after sometime.',\n          icon: \"error\",\n          confirmButtonText: \"OK\",\n        });\n        console.log(e);\n         setTimeout(() => {\n            profle()\n          }, 1000);\n      })\n  }\n  const reject = async (id) => {\n    setMount(true)\n    const access_token = localStorage.getItem(\"token\")\n    const headers = {\n      Authorization: `Bearer ${access_token}`\n    }\n    axios.patch(baseUrl+`temp/withdraw/reject/${id}`,\n      {\n        status: \"reject\"\n      },\n      { headers })\n      .then((res) => {\n        setMount(false)\n        if(res.data.error)\n        {\n          Swal.fire({\n            title: res.data.message,\n            icon: \"danger\",\n            confirmButtonText: \"OK\",\n          });\n        }\n        profle()\n      }).catch((e) => {\n        setMount(false)\n        profle()\n        console.log(e);\n      })\n  }\n\n\n  useEffect(() => {\n    profle()\n  }, [])\n\n\n  if (user == undefined) {\n    return null\n  }\n\n\n  return (\n    mount ?\n      <div className=\"\" style={{ \"height\":\"100%\",\"display\": \"flex\", \"alignItems\": \"center\", \"justifyContent\": \"center\", \"top\": \"0\", \"left\": \"0\", \"right\": \"0\", \"bottom\": \"0\", \"zIndex\": \"9999\", \"backgroundColor\": \"rgb(255, 255, 255)\" }}>\n        <img\n          src={'/Loader1.gif'}\n          style={{ width: \"150px\", height: \"80px\" }}\n        />\n      </div> :\n      <div className=\"row \">\n        <div className=\"col-12 grid-margin\">\n          <div className=\"card\">\n            <div className=\"card-body\">\n              <h4 className=\"card-title\"> Withdrawl Request</h4>\n              <div className=\"table-responsive\">\n                <table className=\"table\">\n                  <thead>\n                    <tr>\n                      <th>#</th>\n                      <th> ID</th>\n                      <th> Phone no.</th>\n                      <th> Username</th>\n                      <th> Amount </th>\n                      <th> Withdraw type </th>\n                      <th> Action </th>\n                    </tr>\n                  </thead>\n\n                  <tbody>\n                    {user && user.map((item, index) => (\n                      <tr key={item._id}>\n                        <td>{index + 1}</td>\n                        <td>{item._id}</td>\n                        <td>{item.user && item.user.Phone}</td>\n                        <td>{item.user && <Link className=\"btn btn-sm btn-outline-info\" to={`/user/view_user/${item.user._id}`} >{item.user.Name}</Link>}</td>\n                        <td>{item.amount}</td>\n                        <td>\n                          {item.type}\n                        </td>\n                        <td>\n                          {!mount && item.status == \"Pending\" && <> <button className=\"btn btn-primary mr-2\" onClick={() => update(item.amount, item.type, item.user._id, item.txn_id, item._id)} >Approve</button> <button className=\"btn btn-danger mr-2\" onClick={() => reject(item._id)} >reject</button></>}\n                          {/* <button type=\"button\" class=\"btn btn-primary\" onClick={() => checkStatus(item._id)}><i class=\"fa fa-eye\" aria-hidden=\"true\"></i> status</button> */}\n                        </td>\n                        {/* <td> */}\n                      </tr>\n\n                    ))\n                    }\n                  </tbody>\n\n                </table>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n\n  );\n};\n\nexport default Withdrawl;"],"sourceRoot":""}