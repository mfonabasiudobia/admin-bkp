{"version":3,"sources":["app/components/adminManagement/TwilioConfig.js"],"names":["TwilioConfig","twilioStatus","setTwilioStatus","useState","testPhone","setTestPhone","loading","setLoading","testLoading","setTestLoading","baseUrl","process","useEffect","checkTwilioStatus","async","token","localStorage","getItem","response","axios","get","concat","headers","Authorization","data","error","console","success","twilioConfigured","message","_jsxs","className","children","_jsx","src","alt","role","onClick","type","placeholder","value","onChange","e","target","maxLength","post","phoneNumber","Swal","fire","icon","title","text","disabled","_Fragment"],"mappings":"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","file":"static/js/16.d2e63512.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport axios from 'axios';\r\nimport Swal from 'sweetalert2';\r\n\r\nconst TwilioConfig = () => {\r\n    const [twilioStatus, setTwilioStatus] = useState(null);\r\n    const [testPhone, setTestPhone] = useState('');\r\n    const [loading, setLoading] = useState(false);\r\n    const [testLoading, setTestLoading] = useState(false);\r\n\r\n    const beckendLocalApiUrl = process.env.REACT_APP_BACKEND_LOCAL_API;\r\n    const beckendLiveApiUrl = process.env.REACT_APP_BACKEND_LIVE_API;\r\n    const nodeMode = process.env.NODE_ENV;\r\n    const baseUrl = nodeMode === \"development\" ? beckendLocalApiUrl : beckendLiveApiUrl;\r\n\r\n    useEffect(() => {\r\n        checkTwilioStatus();\r\n    }, []);\r\n\r\n    const checkTwilioStatus = async () => {\r\n        setLoading(true);\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.get(`${baseUrl}twilio/status`, {\r\n                headers: { Authorization: `Bearer ${token}` }\r\n            });\r\n            setTwilioStatus(response.data);\r\n        } catch (error) {\r\n            console.error('Error checking Twilio status:', error);\r\n            setTwilioStatus({\r\n                success: false,\r\n                twilioConfigured: false,\r\n                message: 'Failed to check Twilio status'\r\n            });\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    const sendTestSMS = async () => {\r\n        if (!testPhone) {\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Please enter a phone number'\r\n            });\r\n            return;\r\n        }\r\n\r\n        setTestLoading(true);\r\n        try {\r\n            const token = localStorage.getItem('token');\r\n            const response = await axios.post(`${baseUrl}twilio/test`, \r\n                { phoneNumber: testPhone },\r\n                { headers: { Authorization: `Bearer ${token}` } }\r\n            );\r\n\r\n            if (response.data.success) {\r\n                Swal.fire({\r\n                    icon: 'success',\r\n                    title: 'Success!',\r\n                    text: 'Test SMS sent successfully!'\r\n                });\r\n            } else {\r\n                Swal.fire({\r\n                    icon: 'error',\r\n                    title: 'Error',\r\n                    text: response.data.message || 'Failed to send test SMS'\r\n                });\r\n            }\r\n        } catch (error) {\r\n            console.error('Error sending test SMS:', error);\r\n            Swal.fire({\r\n                icon: 'error',\r\n                title: 'Error',\r\n                text: 'Failed to send test SMS'\r\n            });\r\n        } finally {\r\n            setTestLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"row\">\r\n            <div className=\"col-12 grid-margin stretch-card\">\r\n                <div className=\"card corona-gradient-card\">\r\n                    <div className=\"card-body py-0 px-0 px-sm-3\">\r\n                        <div className=\"row align-items-center\">\r\n                            <div className=\"col-4 col-sm-3 col-xl-2\">\r\n                                <img\r\n                                    src={`${baseUrl}assets/images/dashboard/Group126@2x.png`}\r\n                                    className=\"gradient-corona-img img-fluid\"\r\n                                    alt=\"\"\r\n                                />\r\n                            </div>\r\n                            <div className=\"col-5 col-sm-7 col-xl-8 pl-0 pl-xl-8 pl-sm-6\">\r\n                                <div className=\"d-flex justify-content-between align-items-center pt-2\">\r\n                                    <div>\r\n                                        <h4 className=\"mb-1 pb-0 text-white\">\r\n                                            Twilio SMS Configuration\r\n                                        </h4>\r\n                                        <p className=\"mb-0 pb-0 tx-light\">\r\n                                            Manage Twilio SMS settings for OTP delivery\r\n                                        </p>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div className=\"col-12 grid-margin stretch-card\">\r\n                <div className=\"card\">\r\n                    <div className=\"card-body\">\r\n                        <h4 className=\"card-title\">Twilio Status</h4>\r\n                        \r\n                        {loading ? (\r\n                            <div className=\"text-center\">\r\n                                <div className=\"spinner-border text-primary\" role=\"status\">\r\n                                    <span className=\"sr-only\">Loading...</span>\r\n                                </div>\r\n                                <p className=\"mt-2\">Checking Twilio configuration...</p>\r\n                            </div>\r\n                        ) : (\r\n                            <div className=\"row\">\r\n                                <div className=\"col-md-6\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>Configuration Status</label>\r\n                                        <div className=\"d-flex align-items-center\">\r\n                                            <div className={`badge badge-${twilioStatus?.twilioConfigured ? 'success' : 'danger'} mr-2`}>\r\n                                                {twilioStatus?.twilioConfigured ? 'Configured' : 'Not Configured'}\r\n                                            </div>\r\n                                            <button \r\n                                                className=\"btn btn-sm btn-outline-primary\"\r\n                                                onClick={checkTwilioStatus}\r\n                                            >\r\n                                                Refresh\r\n                                            </button>\r\n                                        </div>\r\n                                    </div>\r\n                                    \r\n                                    <div className=\"form-group\">\r\n                                        <label>Status Message</label>\r\n                                        <p className=\"text-muted\">{twilioStatus?.message}</p>\r\n                                    </div>\r\n                                </div>\r\n\r\n                                <div className=\"col-md-6\">\r\n                                    <div className=\"form-group\">\r\n                                        <label>Test SMS</label>\r\n                                        <div className=\"input-group\">\r\n                                            <input\r\n                                                type=\"tel\"\r\n                                                className=\"form-control\"\r\n                                                placeholder=\"Enter phone number (e.g., 9876543210)\"\r\n                                                value={testPhone}\r\n                                                onChange={(e) => setTestPhone(e.target.value)}\r\n                                                maxLength=\"10\"\r\n                                            />\r\n                                            <div className=\"input-group-append\">\r\n                                                <button\r\n                                                    className=\"btn btn-primary\"\r\n                                                    onClick={sendTestSMS}\r\n                                                    disabled={testLoading || !twilioStatus?.twilioConfigured}\r\n                                                >\r\n                                                    {testLoading ? (\r\n                                                        <>\r\n                                                            <span className=\"spinner-border spinner-border-sm mr-2\" role=\"status\"></span>\r\n                                                            Sending...\r\n                                                        </>\r\n                                                    ) : (\r\n                                                        'Send Test SMS'\r\n                                                    )}\r\n                                                </button>\r\n                                            </div>\r\n                                        </div>\r\n                                        <small className=\"form-text text-muted\">\r\n                                            Send a test SMS to verify Twilio configuration\r\n                                        </small>\r\n                                    </div>\r\n                                </div>\r\n                            </div>\r\n                        )}\r\n\r\n                        <div className=\"mt-4\">\r\n                            <h5>Environment Variables Required</h5>\r\n                            <div className=\"alert alert-info\">\r\n                                <p><strong>To configure Twilio, add these environment variables to your .env file:</strong></p>\r\n                                <pre className=\"bg-dark text-light p-3 rounded\">\r\n{`TWILIO_ACCOUNT_SID=your_twilio_account_sid_here\r\nTWILIO_AUTH_TOKEN=your_twilio_auth_token_here\r\nTWILIO_PHONE_NUMBER=your_twilio_phone_number_here`}\r\n                                </pre>\r\n                                <p className=\"mb-0\">\r\n                                    <strong>Note:</strong> You can get these credentials from your Twilio Console dashboard.\r\n                                </p>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div className=\"mt-4\">\r\n                            <h5>Features</h5>\r\n                            <ul className=\"list-group list-group-flush\">\r\n                                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                    <span>OTP Delivery via SMS</span>\r\n                                    <span className=\"badge badge-success badge-pill\">Active</span>\r\n                                </li>\r\n                                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                    <span>Fallback to Fast2SMS</span>\r\n                                    <span className=\"badge badge-info badge-pill\">Enabled</span>\r\n                                </li>\r\n                                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                    <span>Admin Login OTP</span>\r\n                                    <span className=\"badge badge-success badge-pill\">Active</span>\r\n                                </li>\r\n                                <li className=\"list-group-item d-flex justify-content-between align-items-center\">\r\n                                    <span>User Registration OTP</span>\r\n                                    <span className=\"badge badge-success badge-pill\">Active</span>\r\n                                </li>\r\n                            </ul>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default TwilioConfig; "],"sourceRoot":""}