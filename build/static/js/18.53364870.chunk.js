(this["webpackJsonpludo-admin"]=this["webpackJsonpludo-admin"]||[]).push([[18],{530:function(e,t,c){"use strict";c.r(t),c.d(t,"default",function(){return d});var a=c(12),s=c.n(a),n=c(0),l=c(15),i=c(37),o=c.n(i),r=c(1);function d(){const[e,t]=Object(n.useState)([]),[c,a]=Object(n.useState)(!0),[i,d]=Object(n.useState)(0),[j,b]=Object(n.useState)(0),[h,m]=Object(n.useState)(10),[u,x]=Object(n.useState)(""),[g,p]=Object(n.useState)("0");var O;O="https://api.cabpe.com/";const N=e=>{if(!e)return"";const t=e.toString();return t.length>=10?"91".concat(t.slice(2,-2),"XX").concat(t.slice(-2)):t},v=async()=>{try{a(!0);const e=localStorage.getItem("token"),c={Authorization:"Bearer ".concat(e)},n=await s.a.get(O+"agent/all?page=".concat(i,"&_limit=").concat(h,"&_q=").concat(u,"&_stype=").concat(g),{headers:c});t(n.data.agents||n.data),b(n.data.totalPages||1),a(!1)}catch(e){console.log(e),a(!1)}};return Object(n.useEffect)(()=>{v()},[i,h,u,g]),c?Object(r.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:Object(r.jsx)("div",{className:"spinner-border text-light",role:"status",children:Object(r.jsx)("span",{className:"sr-only",children:"Loading..."})})}):Object(r.jsx)(r.Fragment,{children:Object(r.jsx)("div",{className:"row bg-dark",children:Object(r.jsx)("div",{className:"col-12 grid-margin",children:Object(r.jsx)("div",{className:"card bg-dark",children:Object(r.jsxs)("div",{className:"card-body text-light",style:{backgroundColor:"rgba(0, 27, 11, 0.734)"},children:[Object(r.jsx)("h4",{className:"card-title text-light",children:"All Agents List"}),Object(r.jsxs)("div",{className:"row mb-3",children:[Object(r.jsxs)("select",{className:"form-control col-sm-3 m-2",id:"searchType",name:"searchtype",onChange:e=>p(e.target.value),children:[Object(r.jsx)("option",{value:"0",children:"Select Search by"}),Object(r.jsx)("option",{value:"Name",children:"Name"}),Object(r.jsx)("option",{value:"Phone",children:"Phone"}),Object(r.jsx)("option",{value:"_id",children:"Agent ID"})]}),Object(r.jsx)("input",{type:"text",placeholder:"Search...",className:"form-control col-sm-4 m-2",onChange:e=>{let t=e.target.value;x(t)}}),Object(r.jsxs)("select",{className:"form-control col-sm-2 m-2 bg-dark text-light",id:"pagelimit",name:"pagelimit",onChange:e=>{let t=e.target.value;m(t)},children:[Object(r.jsx)("option",{value:"10",children:"10"}),Object(r.jsx)("option",{value:"20",children:"20"}),Object(r.jsx)("option",{value:"50",children:"50"}),Object(r.jsx)("option",{value:"100",children:"100"})]})]}),Object(r.jsx)("div",{className:"table-responsive",children:Object(r.jsxs)("table",{className:"table",children:[Object(r.jsx)("thead",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("th",{children:"#"}),Object(r.jsx)("th",{children:"ID"}),Object(r.jsx)("th",{children:"Name"}),Object(r.jsx)("th",{children:"Mobile"}),Object(r.jsx)("th",{children:"Referral Code"}),Object(r.jsx)("th",{children:"Commission (%)"}),Object(r.jsx)("th",{children:"Status"}),Object(r.jsx)("th",{children:"Actions"})]})}),e&&e.map((e,t)=>Object(r.jsx)("tbody",{children:Object(r.jsxs)("tr",{children:[Object(r.jsx)("td",{children:t+1}),Object(r.jsx)("td",{children:e._id}),Object(r.jsx)("td",{children:Object(r.jsx)("span",{className:"pl-2",children:e.Name})}),Object(r.jsx)("td",{children:Object(r.jsx)("a",{className:"cxy flex-column",href:"https://api.whatsapp.com/send?phone=+91".concat(e.Phone,"&text=Hello"),children:N(e.Phone)})}),Object(r.jsx)("td",{children:e.referral_code||"N/A"}),Object(r.jsxs)("td",{children:[e.commission_percentage||10,"%"]}),Object(r.jsx)("td",{children:Object(r.jsx)("div",{className:"badge badge-outline-success",children:"Active"})}),Object(r.jsxs)("td",{children:[Object(r.jsx)("button",{type:"button",className:"btn mx-1 ".concat("Block"===e.user_type?"btn-success":"btn-danger"),onClick:()=>(e=>{if(!0===window.confirm("Are you sure you want to block ".concat(e.Name,"?"))){const t=localStorage.getItem("token"),c={Authorization:"Bearer ".concat(t)},a="Block"===e.user_type?"Agent":"Block";s.a.post(O+"block/user/".concat(e._id),{user_type:a},{headers:c}).then(e=>{v(),alert("Agent status updated successfully!")}).catch(e=>{console.log(e),alert("Error updating agent status")})}})(e),children:"Block"===e.user_type?"Unblock":"Block"}),Object(r.jsx)(l.b,{type:"button",className:"btn btn-outline-info mx-1",to:"/agent/edit/".concat(e._id),children:"Edit"}),Object(r.jsx)(l.b,{type:"button",className:"btn btn-outline-info mx-1",to:"/agent/permissions/".concat(e._id),children:"Grant Permission"})]})]})},e._id))]})}),j>1&&Object(r.jsx)("div",{className:"mt-4",children:Object(r.jsx)(o.a,{previousLabel:"Previous",nextLabel:"Next",breakLabel:"...",pageCount:j,marginPagesDisplayed:2,pageRangeDisplayed:3,onPageChange:async e=>{let t=e.selected+1;d(t)},containerClassName:"pagination justify-content-center",pageClassName:"page-item",pageLinkClassName:"page-link",previousClassName:"page-item",previousLinkClassName:"page-link",nextClassName:"page-item",nextLinkClassName:"page-link",breakClassName:"page-item",breakLinkClassName:"page-link",activeClassName:"active"})})]})})})})})}}}]);
//# sourceMappingURL=18.53364870.chunk.js.map